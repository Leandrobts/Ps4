<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PS4 WebKit Vulnerability Scanner | Minimal Test</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
        #log { background: #111; border: 1px solid #333; padding: 15px; height: 300px; overflow-y: auto; white-space: pre-wrap; margin-top: 15px; }
        #browserInfo { margin-bottom: 15px; border: 1px solid #555; padding: 10px; }
    </style>
</head>
<body>
    <h1>PS4 WebKit Vulnerability Scanner | Minimal Test</h1>

    <div id="browserInfo">
        <strong>User Agent:</strong> <span id="userAgent"></span><br>
        <strong>Platform:</strong> <span id="platform"></span><br>
    </div>

    <div>
        <button onclick="runMinimalTest()">Run Minimal Test</button>
        <div id="log"></div>
    </div>

<script>
function log(message) {
    const logDiv = document.getElementById('log');
    if (logDiv) {
        const line = document.createElement('div');
        line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        logDiv.appendChild(line);
        logDiv.scrollTop = logDiv.scrollHeight;
    } else {
        console.error("Error: #log element not found!");
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const userAgentElement = document.getElementById('userAgent');
    const platformElement = document.getElementById('platform');

    try {
        if (userAgentElement) userAgentElement.textContent = navigator.userAgent;
    } catch (e) {
        console.error("Error getting userAgent:", e);
        if (userAgentElement) userAgentElement.textContent = "N/A";
    }
    try {
        if (platformElement) platformElement.textContent = navigator.platform;
    } catch (e) {
        console.error("Error getting platform:", e);
        if (platformElement) platformElement.textContent = "N/A";
    }
});

async function runMinimalTest() {
    log("=== Starting Minimal Test ===");
    log("Attempting basic OOB write...");
    try {
        const buffer = new ArrayBuffer(10);
        const view = new Uint8Array(buffer);
        view[15] = 123;
        log("OOB write attempted.");
        log(`Value at index 15: ${view[15]}`); // This might error
    } catch (e) {
        log(`Error during OOB write: ${e.message}`);
    }
    log("=== Minimal Test Completed ===");
}
</script>
</body>
</html>
